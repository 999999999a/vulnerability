# CVE-2022-24734

An RCE can be obtained on MyBB's Admin CP in Configuration -> Add New Setting. The user must have a rights to add or update setting. This is tested on [MyBB 1.8.29](https://github.com/mybb/mybb/releases/tag/mybb_1829). 

## 来源

[https://github.com/Altelus1/CVE-2022-24734](https://github.com/Altelus1/CVE-2022-24734)

## 简介

在受影响的版本中，Admin CP 的设置管理模块在插入和更新时无法正确验证设置类型，因此可以使用 PHP 代码添加支持类型“php”的设置，在 _Change Settings_ 页面上执行。

MyBB 的设置模块允许管理员添加、编辑和删除非默认设置，将设置数据存储在选项代码字符串（$options_code；mybb_settings.optionscode 数据库列）中，该字符串标识设置类型及其选项，由新的分隔行字符 (\n)。在 MyBB 1.2.0 中，添加了对设置类型 php 的支持，选项代码的其余部分是在更改设置页面上执行的 PHP 代码（保留供插件和内部使用）。

## 影响范围

1.2.0 <= MyBB < 1.8.30

## 使用说明

![CVE gif](./CVE-2022-24734.gif)

## Sources:
- https://github.com/mybb/mybb/
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-24734
